{% extends 'base.html' %}
{% load static %}
{% load youtube_tags %}
{% load image_utils %}

{% block title %}Suárez, Cauca - Caficultura y Tradición{% endblock %}

{% block meta_description %}Suárez 100% café, Cauca. Portal de noticias, tradición y la riqueza cultural de nuestro
territorio cafetero.{% endblock %}

{% block extra_head %}
{% if banner.imagen_fondo %}
{% webp_url banner.imagen_fondo.url as banner_webp %}
<link rel="preload" as="image" href="{{ banner_webp }}" fetchpriority="high">
{% else %}
<link rel="preload" as="image" href="{% static 'img/bienvenidos.webp' %}" fetchpriority="high">
{% endif %}
{% endblock %}

{% block content %}
<!-- Banner Hero Dinámico -->
{% if banner.imagen_fondo %}
{% webp_url banner.imagen_fondo.url as hero_img %}
{% else %}
{% static 'img/bienvenidos.webp' as hero_img %}
{% endif %}
<section class="hero-institution animate-fade-static">
    <!-- Background Layer -->
    <img src="{{ hero_img }}" alt="Paisaje de Suárez" class="hero-bg-img" fetchpriority="high" loading="eager"
        width="1920" height="1080">
    <div class="hero-overlay"></div>

    <!-- Content Layer -->
    <div class="container hero-content text-center">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <span
                    class="badge bg-accent text-navy mb-4 px-3 py-2 rounded-pill fw-bold text-uppercase shadow-sm">Suárez
                    100% café</span>
                <h1 class="display-2 fw-bold mb-4 text-white">
                    {% if banner %}{{ banner.titulo }}{% else %}Bienvenidos a <span
                        style="color: var(--accent);">Suárez</span>{% endif %}
                </h1>
                <p class="lead fs-4 opacity-90 mb-5 text-white col-md-8 mx-auto">
                    {% if banner %}{{ banner.subtitulo }}{% else %}Tierra de paz, cultura y el aroma inigualable de
                    nuestro café. Conoce lo mejor de nuestro territorio.{% endif %}
                </p>
                <div class="d-flex gap-3 justify-content-center flex-wrap">
                    {% if banner %}
                    <a href="{{ banner.link_boton }}" class="btn-premium text-decoration-none">{{ banner.texto_boton }}
                        <i class="bi bi-chevron-right ms-2"></i></a>
                    {% else %}
                    <a href="{% url 'noticias:lista' %}" class="btn-premium text-decoration-none">Ver Actualidad <i
                            class="bi bi-newspaper ms-2"></i></a>
                    {% endif %}
                    <a href="{% url 'contacto:index' %}"
                        class="btn btn-outline-light btn-lg rounded-pill px-5 border-2 fw-bold">Contactar</a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Sección: Cifras -->
<section class="section-padding bg-pattern-dots" style="background-color: var(--primary-soft);">
    <div class="container">
        <header class="mb-5 text-center">
            <h2 class="section-title">Suárez en Cifras</h2>
        </header>
        <div class="row g-4 text-center">
            <div class="col-6 col-md-3 col-lg-3">
                <div class="stat-card">
                    <i class="bi bi-geo-alt fs-2 text-accent mb-3 d-block"></i>
                    <span class="stat-value">1,050</span>
                    <span class="stat-label">msnm</span>
                </div>
            </div>
            <div class="col-6 col-md-3 col-lg-3">
                <div class="stat-card">
                    <i class="bi bi-people fs-2 text-accent mb-3 d-block"></i>
                    <span class="stat-value">33,762</span>
                    <span class="stat-label">Habitantes</span>
                </div>
            </div>
            <div class="col-6 col-md-3 col-lg-3">
                <div class="stat-card">
                    <i class="bi bi-calendar-check fs-2 text-accent mb-3 d-block"></i>
                    <span class="stat-value">1823</span>
                    <span class="stat-label">Fundación</span>
                </div>
            </div>
            <div class="col-6 col-md-3 col-lg-3">
                <div class="stat-card">
                    <i class="bi bi-map fs-2 text-accent mb-3 d-block"></i>
                    <span class="stat-value">81%</span>
                    <span class="stat-label">Población Rural</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Sección: Descubre Suárez -->
<section class="section-padding">
    <div class="container">
        <header class="mb-5 text-center">
            <h2 class="section-title">Descubre Suárez: Un Territorio de Esperanza</h2>
            <p class="text-muted fs-5 mt-4 col-md-8 mx-auto">Sumérgete en la historia, diversidad y riqueza cultural de
                nuestro municipio.</p>
        </header>

        <div class="row align-items-center mb-5">
            <div class="col-lg-6">
                <h3 class="fw-bold mb-3 text-primary"><i class="bi bi-geo-alt me-2"></i>Historia y Esencia</h3>
                <p class="lead">Suárez, Cauca, es un territorio vibrante con 33,762 habitantes, donde el 81.6% de su
                    gente vive
                    en el campo. Ubicado en el corazón del norte del departamento, este municipio destaca por su
                    juventud y diversidad. Aquí, la educación agroambiental y el café son los motores que están
                    transformando el futuro, reemplazando economías ilícitas por sueños de paz y sostenibilidad.</p>
            </div>
            <div class="col-lg-6 text-center">
                <img src="{% static 'img/comunidades_hero.webp' %}" alt="Historia y Esencia de Suárez" width="600"
                    height="400" class="img-fluid rounded-5 shadow-sm section-image" loading="lazy">
            </div>
        </div>

        <div class="row align-items-center flex-row-reverse mb-5">
            <div class="col-lg-6">
                <h3 class="fw-bold mb-3 text-primary"><i class="bi bi-cup-hot me-2"></i>El Café: Orgullo de Nuestra
                    Tierra</h3>
                <p class="lead">Nuestra tierra es reconocida por sus cultivos de café, sembrados en montañas verdes que
                    dibujan un paisaje único. El café de Suárez es fruto del esfuerzo de familias campesinas que,
                    generación tras generación, han hecho del trabajo agrícola una forma de vida digna y orgullosa. Cada
                    grano representa dedicación, tradición y amor por la tierra.</p>
            </div>
            <div class="col-lg-6 text-center">
                <img src="{% static 'img/el_cafe_orgullo.webp' %}" alt="El Café: Orgullo de Nuestra Tierra" width="600"
                    height="400" class="img-fluid rounded-5 shadow-sm section-image" loading="lazy">
            </div>
        </div>

        <div class="row align-items-center mb-5">
            <div class="col-lg-6">
                <h3 class="fw-bold mb-3 text-primary"><i class="bi bi-people me-2"></i>Diversidad Cultural y Ancestral
                </h3>
                <p class="lead">Suárez es también un municipio pluricultural y diverso, hogar de comunidades indígenas y
                    afrodescendientes que aportan saberes ancestrales, valores comunitarios y una visión profunda del
                    respeto por la naturaleza. Entre las etnias presentes se destacan pueblos indígenas que conservan
                    sus costumbres, su lengua y su relación espiritual con el territorio, así como comunidades afro que
                    enriquecen la identidad local con su música, su historia y su resistencia cultural.</p>
            </div>
            <div class="col-lg-6 text-center">
                <img src="{% static 'img/cafeterasfondo.webp' %}" alt="Diversidad Cultural y Ancestral de Suárez"
                    width="600" height="400" class="img-fluid rounded-5 shadow-sm section-image" loading="lazy">
            </div>
        </div>

        <div class="row justify-content-center text-center">
            <div class="col-lg-10">
                <h3 class="fw-bold mb-3 text-primary"><i class="bi bi-heart me-2"></i>Gente y Futuro</h3>
                <p class="lead mx-auto col-md-10">La gente de Suárez se caracteriza por su calidez, solidaridad y
                    espíritu trabajador. Aquí se cultivan no solo productos agrícolas, sino también valores como el
                    respeto, la convivencia y el sentido de comunidad. En cada vereda y barrio se construyen historias
                    de esfuerzo, superación y compromiso con el futuro del municipio.</p>
                <p class="lead mx-auto col-md-10">La cultura suareña se expresa en sus fiestas, en la música
                    tradicional, en la gastronomía local y en las expresiones artísticas que reflejan la identidad del
                    territorio. Su entorno natural, atravesado por ríos, montañas y zonas rurales fértiles, ofrece
                    paisajes que invitan a la contemplación y al cuidado del medio ambiente.</p>
                <p class="lead mx-auto col-md-10">Este espacio informativo nace con el propósito de resaltar lo mejor de
                    Suárez, Cauca, compartir información relevante, visibilizar sus comunidades y fortalecer el sentido
                    de pertenencia por nuestro municipio. Suárez es tierra de paz, café y diversidad; un lugar donde las
                    raíces culturales y la riqueza humana construyen un presente lleno de significado y un futuro con
                    esperanza.</p>
            </div>
        </div>
    </div>
</section>

<!-- Decorative Spacer -->
{% static 'img/bienvenidos.webp' as spacer_img %}
<section class="bg-amanecer py-5 text-center shadow-lg"
    style="background-image: url('{{ spacer_img }}'); background-size: cover; background-position: center; min-height: 50vh; display: flex; align-items: center;">
    <div class="container py-5">
        <div class="glass-readability animate-fade">
            <h2 class="display-4 fw-bold mb-3 text-white text-shadow-strong">Tierra de Paz y Café</h2>
            <p class="lead fs-3 opacity-90 mx-auto col-md-10 text-white text-shadow-strong">Un paraíso escondido entre
                las montañas del Cauca.</p>
        </div>
    </div>
</section>

<!-- Sección: Eventos -->
<section class="section-padding bg-pattern-grid">
    <div class="container">
        <header class="mb-5 text-center">
            <h2 class="section-title">Actualidad y Compromiso</h2>
            <p class="text-muted col-md-6 mx-auto">Sigue de cerca las acciones y eventos que marcan el rumbo de nuestro
                municipio.</p>
        </header>

        {% for evento in eventos %}
        <div class="row row-alternate g-5 mb-5 align-items-center">
            <div class="col-lg-6">
                <div class="rounded-5 overflow-hidden shadow-premium">
                    {% if evento.imagen %}
                    <img src="{{ evento.imagen.url }}" class="img-fluid d-block mx-auto" alt="{{ evento.titulo }}"
                        width="800" height="600"
                        style="max-height: 600px; width: auto; aspect-ratio: 4/3; object-fit: cover; transition: transform 0.5s ease;"
                        loading="lazy">
                    {% else %}
                    <div class="bg-secondary w-100" style="height: 300px;"></div>
                    {% endif %}
                </div>
            </div>
            <div class="col-lg-6">
                <div class="ps-lg-5 glass-card p-4 p-lg-5">
                    <div class="badge bg-primary-soft text-primary fw-bold mb-3 px-3 py-2 rounded-pill shadow-sm">
                        <i class="bi bi-calendar-event me-2"></i>{{ evento.fecha_evento }}
                    </div>
                    <h3 class="fw-bold mb-4 display-6">{{ evento.titulo }}</h3>
                    <p class="text-muted fs-5 mb-5 leading-relaxed">{{ evento.descripcion }}</p>
                    <a href="{{ evento.link }}" target="_blank" rel="noopener noreferrer"
                        class="btn btn-outline-primary btn-lg rounded-pill px-5 fw-bold border-2">
                        Conoce más detalles <i class="bi bi-plus-lg ms-2"></i>
                    </a>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="text-center py-5">
            <i class="bi bi-journal-text display-1 text-muted opacity-25 mb-4"></i>
            <p class="text-muted fs-5">No hay eventos destacados en este momento.</p>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Sección: Videos -->
<section class="section-padding section-alt">
    <div class="container">
        <header class="mb-5 text-center">
            <h2 class="section-title">Canal Institucional</h2>
            <p class="text-muted mt-3">Comunicación directa con la comunidad a través de video.</p>
        </header>
        <div class="row g-5 justify-content-center">
            {% for video in videos %}
            <div class="col-lg-10 col-xl-8">
                <div class="video-item mb-5 p-4 bg-white rounded-5 shadow-premium">
                    <div class="ratio ratio-16x9 rounded-4 overflow-hidden shadow-sm bg-black">
                        <iframe src="{{ video.url_embebida|youtube_embed }}" title="{{ video.titulo }}"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            referrerpolicy="no-referrer-when-downgrade" frameborder="0" allowfullscreen>
                        </iframe>
                    </div>
                    <div class="text-center mt-4">
                        <h3 class="fw-bold text-navy mb-4 h4">{{ video.titulo }}</h3>
                        <div class="d-flex justify-content-center">
                            <a href="{{ video.url_embebida }}" target="_blank"
                                class="btn btn-danger btn-lg rounded-pill px-4 shadow-sm fw-bold">
                                <i class="bi bi-youtube me-2"></i>Abrir en YouTube
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Sección: Galería -->
<section class="section-padding">
    <div class="container">
        <header class="mb-5 text-center">
            <h2 class="section-title">Suárez en Imágenes</h2>
            <p class="text-muted">Un recorrido visual por la belleza de nuestra geografía y su gente.</p>
        </header>

        {% if imagenes %}
        <div id="galleryCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                {% for img in imagenes %}
                {% if forloop.counter0|divisibleby:3 %}
                <div class="carousel-item {% if forloop.first %}active{% endif %}" data-bs-interval="5000">
                    <div class="carousel-gallery-row">
                        {% endif %}

                        <div class="carousel-gallery-item">
                            <div class="gallery-item-wrapper shadow-premium">
                                {% webp_url img.imagen.url as img_webp %}
                                <img src="{{ img_webp }}" class="gallery-img" alt="{{ img.titulo }}" width="400"
                                    height="400" loading="lazy">
                                {% if img.titulo %}
                                <div class="gallery-caption-overlay text-center">
                                    <h3 class="fw-bold mb-0 text-white fs-4">{{ img.titulo }}</h3>
                                </div>
                                {% endif %}
                            </div>
                        </div>

                        {% if forloop.counter|divisibleby:3 or forloop.last %}
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>

            <button class="carousel-control-prev" type="button" data-bs-target="#galleryCarousel" data-bs-slide="prev"
                aria-label="Anterior">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#galleryCarousel" data-bs-slide="next"
                aria-label="Siguiente">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
            </button>
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}